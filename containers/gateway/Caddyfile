{
	# Global options
	# email {$ACME_EMAIL} # Optional: For Let's Encrypt notifications
}

http://{$DOMAIN} {
	log

	# Livesound (Icecast)
	# Mapped to /stream to keep root clean for Dashboard.
	# We strip the prefix so Icecast receives requests at its root (or mountpoints).
	handle_path /stream* {
		reverse_proxy silvasonic_livesound:8000
	}

	# Dashboard (Default)
	handle /* {
		reverse_proxy silvasonic_dashboard:8000
	}

	# Basic Auth
	# Required for security as per V2 spec
	basic_auth {
		{$BASIC_AUTH_USER} {$BASIC_AUTH_PASS}
	}
}
